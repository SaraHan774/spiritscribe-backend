---
alwaysApply: true
---

# SpiritScribe ìœ„ìŠ¤í‚¤ ì†Œì…œ API ì„¤ê³„ ë¬¸ì„œ

## ğŸ“‹ ê°œìš”
SpiritScribe ìœ„ìŠ¤í‚¤ ì†Œì…œ ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ì„ ìœ„í•œ REST API ì„¤ê³„ ë¬¸ì„œì…ë‹ˆë‹¤.

## ğŸŒ Base URL
```
Production: https://api.spiritscribe.com/v1
Development: https://dev-api.spiritscribe.com/v1
```

## ğŸ” ì¸ì¦
```http
Authorization: Bearer <JWT_TOKEN>
```

## ğŸ“Š API ì—”ë“œí¬ì¸íŠ¸

### 1. ì‚¬ìš©ì ê´€ë ¨ API

#### ì‚¬ìš©ì í”„ë¡œí•„ ì¡°íšŒ
```http
GET /users/{userId}
GET /users/me (í˜„ì¬ ì‚¬ìš©ì)
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "id": "user_123",
  "username": "whiskeylover",
  "displayName": "ìœ„ìŠ¤í‚¤ëŸ¬ë²„",
  "email": "user@example.com",
  "profileImageUrl": "https://cdn.spiritscribe.com/profiles/user_123.jpg",
  "bio": "ìœ„ìŠ¤í‚¤ë¥¼ ì‚¬ë‘í•˜ëŠ” ì‚¬ëŒì…ë‹ˆë‹¤",
  "isVerified": false,
  "isPrivate": false,
  "location": "ì„œìš¸, í•œêµ­",
  "website": "https://whiskeyblog.com",
  "stats": {
    "checkInsCount": 156,
    "followersCount": 1240,
    "followingCount": 890,
    "reviewsCount": 98,
    "favoritesCount": 45,
    "averageRating": 4.2
  },
  "createdAt": "2024-01-15T10:30:00Z",
  "lastLoginAt": "2024-01-20T15:45:00Z"
}
```

#### ì‚¬ìš©ì í”„ë¡œí•„ ì—…ë°ì´íŠ¸
```http
PUT /users/me
```

**ìš”ì²­ ë³¸ë¬¸:**
```json
{
  "displayName": "ìƒˆë¡œìš´ ì´ë¦„",
  "bio": "ì—…ë°ì´íŠ¸ëœ ìê¸°ì†Œê°œ",
  "location": "ë¶€ì‚°, í•œêµ­",
  "website": "https://newblog.com",
  "isPrivate": false
}
```

#### ì‚¬ìš©ì ê²€ìƒ‰
```http
GET /users/search?q={query}&limit=20&offset=0
```

### 2. íŒ”ë¡œìš° ê´€ë ¨ API

#### ì‚¬ìš©ì íŒ”ë¡œìš°
```http
POST /users/{userId}/follow
```

#### ì‚¬ìš©ì ì–¸íŒ”ë¡œìš°
```http
DELETE /users/{userId}/follow
```

#### íŒ”ë¡œì›Œ ëª©ë¡ ì¡°íšŒ
```http
GET /users/{userId}/followers?limit=20&offset=0
```

#### íŒ”ë¡œì‰ ëª©ë¡ ì¡°íšŒ
```http
GET /users/{userId}/following?limit=20&offset=0
```

#### íŒ”ë¡œìš° ìƒíƒœ í™•ì¸
```http
GET /users/{userId}/follow-status
```

### 3. ì²´í¬ì¸ ê´€ë ¨ API

#### ì²´í¬ì¸ ìƒì„±
```http
POST /check-ins
```

**ìš”ì²­ ë³¸ë¬¸:**
```json
{
  "whiskeyId": "whiskey_456",
  "location": "ê°•ë‚¨ ìœ„ìŠ¤í‚¤ë°”",
  "locationLat": 37.5665,
  "locationLng": 126.9780,
  "locationType": "WHISKEY_BAR",
  "rating": 4.5,
  "notes": "ì •ë§ ë¶€ë“œëŸ½ê³  ë³µì¡í•œ ë§›ì´ì—ìš”. ì˜¤í¬ í–¥ì´ íŠ¹íˆ ì¢‹ìŠµë‹ˆë‹¤!",
  "images": [
    "https://cdn.spiritscribe.com/checkins/image1.jpg",
    "https://cdn.spiritscribe.com/checkins/image2.jpg"
  ],
  "tags": ["ì‹±ê¸€ëª°íŠ¸", "ìŠ¤ëª¨í‚¤", "í”„ë¦¬ë¯¸ì—„"],
  "isPublic": true
}
```

#### ì²´í¬ì¸ ì¡°íšŒ
```http
GET /check-ins/{checkInId}
GET /check-ins (í”¼ë“œ ì¡°íšŒ)
GET /check-ins/user/{userId} (ì‚¬ìš©ì ì²´í¬ì¸)
GET /check-ins/whiskey/{whiskeyId} (ìœ„ìŠ¤í‚¤ ì²´í¬ì¸)
```

**ì‘ë‹µ ì˜ˆì‹œ:**
```json
{
  "id": "checkin_789",
  "userId": "user_123",
  "user": {
    "id": "user_123",
    "username": "whiskeylover",
    "displayName": "ìœ„ìŠ¤í‚¤ëŸ¬ë²„",
    "profileImageUrl": "https://cdn.spiritscribe.com/profiles/user_123.jpg",
    "isVerified": false
  },
  "whiskeyId": "whiskey_456",
  "whiskey": {
    "id": "whiskey_456",
    "name": "Macallan 18",
    "distillery": "The Macallan",
    "imageUrl": "https://cdn.spiritscribe.com/whiskies/whiskey_456.jpg"
  },
  "location": "ê°•ë‚¨ ìœ„ìŠ¤í‚¤ë°”",
  "locationLat": 37.5665,
  "locationLng": 126.9780,
  "locationType": "WHISKEY_BAR",
  "rating": 4.5,
  "notes": "ì •ë§ ë¶€ë“œëŸ½ê³  ë³µì¡í•œ ë§›ì´ì—ìš”. ì˜¤í¬ í–¥ì´ íŠ¹íˆ ì¢‹ìŠµë‹ˆë‹¤!",
  "images": [
    "https://cdn.spiritscribe.com/checkins/image1.jpg",
    "https://cdn.spiritscribe.com/checkins/image2.jpg"
  ],
  "tags": ["ì‹±ê¸€ëª°íŠ¸", "ìŠ¤ëª¨í‚¤", "í”„ë¦¬ë¯¸ì—„"],
  "likesCount": 24,
  "commentsCount": 8,
  "sharesCount": 3,
  "isLikedByMe": false,
  "isPublic": true,
  "isFeatured": false,
  "createdAt": "2024-01-20T18:30:00Z",
  "updatedAt": "2024-01-20T18:30:00Z"
}
```

#### ì²´í¬ì¸ ì—…ë°ì´íŠ¸
```http
PUT /check-ins/{checkInId}
```

#### ì²´í¬ì¸ ì‚­ì œ
```http
DELETE /check-ins/{checkInId}
```

### 4. ì¢‹ì•„ìš” ê´€ë ¨ API

#### ì²´í¬ì¸ ì¢‹ì•„ìš”
```http
POST /check-ins/{checkInId}/like
```

#### ì²´í¬ì¸ ì¢‹ì•„ìš” ì·¨ì†Œ
```http
DELETE /check-ins/{checkInId}/like
```

#### ëŒ“ê¸€ ì¢‹ì•„ìš”
```http
POST /comments/{commentId}/like
```

#### ëŒ“ê¸€ ì¢‹ì•„ìš” ì·¨ì†Œ
```http
DELETE /comments/{commentId}/like
```

### 5. ëŒ“ê¸€ ê´€ë ¨ API

#### ëŒ“ê¸€ ì¶”ê°€
```http
POST /check-ins/{checkInId}/comments
```

**ìš”ì²­ ë³¸ë¬¸:**
```json
{
  "content": "ì •ë§ ì¢‹ì€ ìœ„ìŠ¤í‚¤ë„¤ìš”! ì–´ë””ì„œ êµ¬ë§¤í•˜ì…¨ë‚˜ìš”?",
  "parentCommentId": null
}
```

#### ëŒ“ê¸€ ëª©ë¡ ì¡°íšŒ
```http
GET /check-ins/{checkInId}/comments?limit=20&offset=0
```

#### ëŒ“ê¸€ ìˆ˜ì •
```http
PUT /comments/{commentId}
```

#### ëŒ“ê¸€ ì‚­ì œ
```http
DELETE /comments/{commentId}
```

### 6. ê³µìœ  ê´€ë ¨ API

#### ì²´í¬ì¸ ê³µìœ 
```http
POST /check-ins/{checkInId}/share
```

**ìš”ì²­ ë³¸ë¬¸:**
```json
{
  "platform": "FACEBOOK"
}
```

### 7. ì•Œë¦¼ ê´€ë ¨ API

#### ì•Œë¦¼ ëª©ë¡ ì¡°íšŒ
```http
GET /notifications?limit=50&offset=0&unreadOnly=false
```

#### ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
```http
PUT /notifications/{notificationId}/read
```

#### ëª¨ë“  ì•Œë¦¼ ì½ìŒ ì²˜ë¦¬
```http
PUT /notifications/read-all
```

#### ì½ì§€ ì•Šì€ ì•Œë¦¼ ìˆ˜ ì¡°íšŒ
```http
GET /notifications/unread-count
```

### 8. í•´ì‹œíƒœê·¸ ê´€ë ¨ API

#### íŠ¸ë Œë”© í•´ì‹œíƒœê·¸ ì¡°íšŒ
```http
GET /hashtags/trending?limit=20
```

#### í•´ì‹œíƒœê·¸ ê²€ìƒ‰
```http
GET /hashtags/search?q={query}&limit=10
```

#### í•´ì‹œíƒœê·¸ë³„ ì²´í¬ì¸ ì¡°íšŒ
```http
GET /hashtags/{tagName}/check-ins?limit=20&offset=0
```

### 9. ìœ„ì¹˜ ê´€ë ¨ API

#### ìœ„ì¹˜ë³„ ì²´í¬ì¸ ì¡°íšŒ
```http
GET /locations/check-ins?lat={latitude}&lng={longitude}&radius={radius}
```

#### ì¸ê¸° ì¥ì†Œ ì¡°íšŒ
```http
GET /locations/popular?type=WHISKEY_BAR&limit=20
```

### 10. ê²€ìƒ‰ ê´€ë ¨ API

#### í†µí•© ê²€ìƒ‰
```http
GET /search?q={query}&type=all&limit=20&offset=0
```

**type ì˜µì…˜:**
- `all`: ëª¨ë“  íƒ€ì…
- `users`: ì‚¬ìš©ìë§Œ
- `whiskies`: ìœ„ìŠ¤í‚¤ë§Œ
- `checkins`: ì²´í¬ì¸ë§Œ
- `hashtags`: í•´ì‹œíƒœê·¸ë§Œ

## ğŸ“± Firebase Integration

### Firebase Cloud Messaging (FCM)
```json
{
  "to": "device_token",
  "notification": {
    "title": "ìƒˆë¡œìš´ ì¢‹ì•„ìš”",
    "body": "ìœ„ìŠ¤í‚¤ëŸ¬ë²„ê°€ ë‹¹ì‹ ì˜ ì²´í¬ì¸ì„ ì¢‹ì•„í•©ë‹ˆë‹¤."
  },
  "data": {
    "type": "LIKE",
    "checkInId": "checkin_789",
    "userId": "user_123"
  }
}
```

### Firebase Storage
```
ì²´í¬ì¸ ì´ë¯¸ì§€: /check-ins/{checkInId}/images/{imageId}.jpg
í”„ë¡œí•„ ì´ë¯¸ì§€: /users/{userId}/profile.jpg
ìœ„ìŠ¤í‚¤ ì´ë¯¸ì§€: /whiskies/{whiskeyId}/image.jpg
```

### Firebase Firestore (ì‹¤ì‹œê°„ ë°ì´í„°)
```javascript
// ì‹¤ì‹œê°„ í”¼ë“œ êµ¬ë…
db.collection('check_ins')
  .where('isPublic', '==', true)
  .orderBy('createdAt', 'desc')
  .limit(20)
  .onSnapshot((snapshot) => {
    // ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸ ì²˜ë¦¬
  });

// ì‹¤ì‹œê°„ ì•Œë¦¼ êµ¬ë…
db.collection('notifications')
  .where('userId', '==', currentUserId)
  .where('isRead', '==', false)
  .onSnapshot((snapshot) => {
    // ìƒˆë¡œìš´ ì•Œë¦¼ ì²˜ë¦¬
  });
```

## ğŸ”„ ì‹¤ì‹œê°„ ê¸°ëŠ¥

### WebSocket ì—°ê²°
```javascript
const ws = new WebSocket('wss://api.spiritscribe.com/ws');

// ì¢‹ì•„ìš” ì‹¤ì‹œê°„ ì—…ë°ì´íŠ¸
ws.send(JSON.stringify({
  type: 'LIKE',
  checkInId: 'checkin_789',
  userId: 'user_123'
}));

// ìƒˆë¡œìš´ ëŒ“ê¸€ ì‹¤ì‹œê°„ ì•Œë¦¼
ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  if (data.type === 'NEW_COMMENT') {
    // ëŒ“ê¸€ UI ì—…ë°ì´íŠ¸
  }
};
```

## ğŸ“Š ìºì‹± ì „ëµ

### Redis ìºì‹±
```
ì‚¬ìš©ì í”„ë¡œí•„: user:{userId}
ì²´í¬ì¸ í”¼ë“œ: feed:{userId}:page:{page}
íŠ¸ë Œë”© í•´ì‹œíƒœê·¸: trending_hashtags
ì¸ê¸° ì²´í¬ì¸: featured_checkins
```

### CDN í™œìš©
```
ì´ë¯¸ì§€ íŒŒì¼: CloudFlare CDN
ì •ì  ìì‚°: AWS CloudFront
API ì‘ë‹µ: Redis Cache
```

## ğŸ”’ ë³´ì•ˆ ê³ ë ¤ì‚¬í•­

### Rate Limiting
```
ì¼ë°˜ API: 1000 requests/hour
ì—…ë¡œë“œ API: 100 requests/hour
ê²€ìƒ‰ API: 500 requests/hour
```

### ë°ì´í„° ê²€ì¦
```json
{
  "rating": {
    "min": 1.0,
    "max": 5.0,
    "step": 0.1
  },
  "notes": {
    "maxLength": 1000
  },
  "images": {
    "maxCount": 5,
    "maxSize": "10MB",
    "allowedFormats": ["jpg", "jpeg", "png", "webp"]
  }
}
```

### ê°œì¸ì •ë³´ ë³´í˜¸
- ì´ë©”ì¼ ì£¼ì†Œ ë§ˆìŠ¤í‚¹
- ìœ„ì¹˜ ì •ë³´ ì •ë°€ë„ ì¡°ì ˆ
- ë¹„ê³µê°œ ê³„ì • ë°ì´í„° ë³´í˜¸
- GDPR ì¤€ìˆ˜

## ğŸ“ˆ ì„±ëŠ¥ ìµœì í™”

### ë°ì´í„°ë² ì´ìŠ¤ ì¸ë±ì‹±
```sql
-- ë³µí•© ì¸ë±ìŠ¤
CREATE INDEX idx_checkins_user_created ON check_ins(userId, createdAt DESC);
CREATE INDEX idx_checkins_public_created ON check_ins(isPublic, createdAt DESC);
CREATE INDEX idx_checkins_whiskey_created ON check_ins(whiskeyId, createdAt DESC);

-- ê³µê°„ ì¸ë±ìŠ¤ (ìœ„ì¹˜ ê¸°ë°˜ ê²€ìƒ‰)
CREATE SPATIAL INDEX idx_checkins_location ON check_ins(locationLat, locationLng);
```

### API ì‘ë‹µ ìµœì í™”
```json
{
  "data": [...],
  "pagination": {
    "limit": 20,
    "offset": 0,
    "total": 1000,
    "hasMore": true
  },
  "metadata": {
    "responseTime": "45ms",
    "cached": true,
    "version": "1.0"
  }
}
```

ì´ API ì„¤ê³„ëŠ” SpiritScribeì˜ ìœ„ìŠ¤í‚¤ ì†Œì…œ ì»¤ë®¤ë‹ˆí‹° ê¸°ëŠ¥ì„ ìœ„í•œ ì™„ì „í•œ ë°±ì—”ë“œ ì‹œìŠ¤í…œì„ ì œê³µí•©ë‹ˆë‹¤.